<!DOCTYPE html>
<html lang="en">
       <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>DB Programs and Objects</title>

        <!-- Bootstrap Core CSS -->
        <link href="../../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- MetisMenu CSS -->
        <link href="../../bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet">

        <!-- DataTables CSS -->
        <link href="../../bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet">

        <!-- DataTables Responsive CSS -->
        <link href="../../bower_components/datatables-responsive/css/dataTables.responsive.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="../../dist/css/sb-admin-2.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="../../bower_components/fontawesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../../dist/css/jquery.mCustomScrollbar.css">
        <link href="../../dist/css/style.css" rel="stylesheet">
        <script src="../../js/jquery-1.11.1.min.js"></script>
        <script src="../../dist/js/selectAllJavaScript.js"></script>
        <style>
            html, body{ height: 100%; }
        </style>
    </head>

    <body>
        <div id="wrapper">
            <div id="page-wrapper">
                <div class="row">
                    <br/>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="panel panel-info">
                            <div class="panel-heading">
                                <h4><span class="fa fa-table fa-fw"></span>  <a style="text-decoration: none; " id="MS_DMS_DOCUMENTS_DUE_INFO_PV1">MS_DMS_DOCUMENTS_DUE_INFO_PV1</a> </h4>
                            </div>
                            <div class="panel-body">
                                <div class="dataTable_wrapper">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="btn btn-primary" onclick="SelectText('selectme')">Select All</button>
                                            </div>
                                            <div class="modal-body" >
                                                <pre id="selectme">
                                                
  CREATE OR REPLACE FORCE VIEW "PDMS61SP2_DEV"."MS_DMS_DOCUMENTS_DUE_INFO_PV1" ("DOCUMENT_NAME", "CATEGORY_ID", "SUB_CATEGORY1", "SUB_CATEGORY2", "SUB_CATEGORY3", "SUB_CATEGORY4", "LOCALE_ID", "LAST_UPDATED_BY", "DUE_DATE", "DUE_DATE_COLOR", "AUTHOR_FULL_NAME", "AUTHOR_NAME", "OWNER_FULL_NAME", "OWNER_NAME", "EFFECTIVE_FROM", "DOCUMENT_OBJECT_ID", "DOCUMENT_ID", "INITIATOR_FULL_NAME", "INITIATOR_NAME", "CREATED_ON", "DOC_TYPE_STORED", "DOCUMENT_TYPE", "VERSION", "NEXT_SCHEDULE_DATE", "REASSIGN_URL", "PROCESS_INSTANCE_ID", "USER_NAME", "STAGE_ID", "LAST_UPDATED_ON", "STAGE_NAME", "LIFECYCLE_NAME") AS 
  SELECT "DOCUMENT_NAME",
    "CATEGORY_ID",
    "SUB_CATEGORY1",
    "SUB_CATEGORY2",
    "SUB_CATEGORY3",
    "SUB_CATEGORY4",
    "LOCALE_ID",
    (SELECT full_name FROM ms_dms_local_users_t WHERE user_id = LAST_UPDATED_BY
    ) AS LAST_UPDATED_BY,
    "DUE_DATE",
    "DUE_DATE_COLOR",
    (SELECT full_name FROM ms_dms_local_users_t WHERE user_name = AUTHOR_NAME
    ) AS AUTHOR_FULL_NAME,
    AUTHOR_NAME,
    (SELECT full_name FROM ms_dms_local_users_t WHERE user_name = OWNER_NAME
    ) AS OWNER_FULL_NAME,
    "OWNER_NAME",
    "EFFECTIVE_FROM",
    "DOCUMENT_OBJECT_ID",
    "DOCUMENT_ID",
    (SELECT full_name FROM ms_dms_local_users_t WHERE user_name = INITIATOR_NAME
    ) AS INITIATOR_FULL_NAME,
    "INITIATOR_NAME",
    "CREATED_ON",
    "DOC_TYPE_STORED",
    (SELECT displayed_value
    FROM ms_qs_list_of_values lovvalue,
      ms_qs_lov_names lovname
    WHERE lovvalue.lov_id      = lovname.lov_id
    AND lovvalue.org_entity_id = 1
    AND lovvalue.enterprise_id =
      (SELECT enterprise_id FROM si_metrics WHERE metric_id = z.infolet_id
      )
    AND lovvalue.stored_value = z.doc_type
    AND lovname.enterprise_id =
      (SELECT enterprise_id FROM si_metrics WHERE metric_id = z.infolet_id
      )
    AND lovname.lov_name   = 'MS_DMS_INLINE_DOCUMENT_TYPE'
    AND lovvalue.locale_id = d.locale_id
    ) AS document_type,
    "VERSION",
    "NEXT_SCHEDULE_DATE",
    "REASSIGN_URL",
    "PROCESS_INSTANCE_ID",
    d.user_name AS USER_NAME,
    "STAGE_ID",
    "LAST_UPDATED_ON",
    (SELECT STAGE_NAME
    FROM SI_DMS_LIFECYCLE_STAGES_V
    WHERE stage_id=z.stage_id
    AND LOCALE_ID = d.locale_id
    ) AS stage_name,
    LIFECYCLE_NAME
  FROM
    (SELECT b.user_id AS user_id,
      --MS_DMS_RPT_UTILS.get_form_url(B.process_instance_id,b.infolet_id, a.document_name,b.ASSIGNMENT_ID )as document_name,
      ('<a target="_self" href="javascript:calldocument_form(''Pushinfolet?id='
      || htf.ESCAPE_SC(TO_CHAR(b.infolet_id))
      || CHR (38)
      || 'proc='
      || htf.ESCAPE_SC(TO_CHAR(B.process_instance_id))
      || CHR (38)
      || 'flag=1'
      || CHR (38)
      || 'emd=1'
      ||
      CASE
        WHEN b.ASSIGNMENT_ID IS NOT NULL
        THEN CHR(38)
          ||'user_asgn_id='
          ||b.ASSIGNMENT_ID
        ELSE NULL
      END
      ||''')">'
      || SUBSTR(''
      || htf.ESCAPE_SC(a.document_name)
      ||'',1,3800)
      || '</a>')         AS document_name,
      A.CATEGORY_ID      AS category_id,
      A.SUB_CATEGORY1_ID AS SUB_CATEGORY1,
      A.SUB_CATEGORY2_ID AS SUB_CATEGORY2,
      A.SUB_CATEGORY3_ID AS SUB_CATEGORY3,
      A.SUB_CATEGORY4_ID AS SUB_CATEGORY4,
      -- ms_apps_utilities.get_user_full_name(b.last_updated_by) as last_updated_by,
      b.last_updated_by AS last_updated_by,
      B.due_date        AS due_date,
      CASE
        WHEN (TRUNC(B.due_date)-TRUNC(SYSDATE)) IS NULL
        THEN 'NONE'
        WHEN (TRUNC(B.due_date)-TRUNC(SYSDATE)) < 0
        THEN 'RED'
        WHEN (TRUNC(B.due_date)-TRUNC(SYSDATE)) >= 0
        THEN 'GREEN'
      END AS due_date_color,
      -- ms_apps_utilities.get_user_full_name(a.author_id) as author_full_name,
      a.author_name AS author_name,
      -- ms_apps_utilities.get_user_full_name(a.owner_id) as owner_full_name,
      a.owner_name AS owner_name,
      --NVL(a.effective_from,a.created_on) AS effective_from,
      a.effective_from     AS effective_from,
      a.document_object_id AS document_object_id,
      a.document_number    AS document_id,
      -- ms_apps_utilities.get_user_full_name(originator_id) as initiator_full_name,
      originator_name AS initiator_name,
      a.created_on    AS created_on,
      a.doc_type      AS doc_type_stored,
      --MS_APPS_UTILITIES.Get_Display_Value(MS_APPS_UTILITIES.get_enterprise_id(b.infolet_id), 'MS_DMS_INLINE_DOCUMENT_TYPE', a.doc_type,1,d.locale_id) as document_type,
      b.infolet_id     AS infolet_id,
      a.doc_type       AS doc_type,
      a.version_number AS version,
      (
      CASE
        WHEN SCHEDULE_PERIOD_TYPE=1
        THEN (NVL(a.effective_from,a.created_on) + REVIEW_SCHEDULE_DAYS)
        WHEN schedule_period_type=2
        THEN (add_months(NVL(a.effective_from,a.created_on),review_schedule_days))
        WHEN SCHEDULE_PERIOD_TYPE=3
        THEN (ADD_MONTHS(NVL(a.effective_from,a.created_on),(REVIEW_SCHEDULE_DAYS*12)))
        ELSE NULL
      END) AS next_schedule_date,
      --  MS_DMS_RPT_UTILS.get_reassign_url(B.process_instance_id,b.infolet_id,b.assignment_id) as reassign_url,
      ('<a target="_self" href="javascript:callreassign_form(''Pushinfolet?id='
      || htf.ESCAPE_SC(TO_CHAR(
      (SELECT METRIC_ID
      FROM SI_METRICS_T
      WHERE METRIC_NAME = 'MS_DMS_REASSIGNMENT_DOCUMENT'
      ) ))
      || CHR (38)
      || 'proc='
      || htf.ESCAPE_SC(TO_CHAR(B.process_instance_id))
      || CHR (38)
      || 'flag=1'
      || CHR (38)
      || 'emd=1'
      || CHR (38)
      || 'assignId='
      ||htf.ESCAPE_SC(TO_CHAR(b.assignment_id))
      || chr (38)
      || 'infoletId='
      ||htf.escape_sc(TO_CHAR(b.infolet_id))
      ||''')"><img border="0" src="/images/icons/reassign.png"></a>') AS reassign_url,
      b.process_instance_id                                           AS process_instance_id,
      TO_CHAR(a.current_stage_id)                                     AS stage_id,
      NVL(b.last_update_date,b.creation_date)                         AS last_updated_on,
      -- MS_DMS_MLS_UTILITIES.MS_DMS_GET_STAGE_MLSVALUE(a.CURRENT_STAGE_ID,d.locale_id) as stage_name
      TO_CHAR(a.LIFE_CYCLE_ID) AS LIFECYCLE_ID,
      a.LIFE_CYCLE_NAME        AS LIFECYCLE_NAME
    FROM MS_DMS_DOCUMENTS_HDR_ALL_V a ,
      si_event_assignments b
    WHERE a.process_instance_id = b.process_instance_id
	AND B.STATUS IN (1,4,5)
    UNION ALL
    SELECT t1.user_id,
      --MS_DMS_RPT_UTILS.GET_FORM_URL(t1.PROCESS_INSTANCE_ID,t1.INFOLET_ID,t.object_name,t1.assignment_id) as document_name,
      ('<a target="_self" href="javascript:calldocument_form(''Pushinfolet?id='
      || htf.ESCAPE_SC(TO_CHAR(t1.INFOLET_ID))
      || CHR (38)
      || 'proc='
      || htf.ESCAPE_SC(TO_CHAR(t1.PROCESS_INSTANCE_ID))
      || CHR (38)
      || 'flag=1'
      || CHR (38)
      || 'emd=1'
      ||
      CASE
        WHEN t1.assignment_id IS NOT NULL
        THEN CHR(38)
          ||'user_asgn_id='
          ||t1.assignment_id
        ELSE NULL
      END
      ||''')">'
      || SUBSTR(''
      || htf.ESCAPE_SC(t.object_name)
      ||'',1,3800)
      || '</a>')             AS document_name,
      t.SELECTED_CATEGORY_ID AS category_id,
      T.HDN_SUB_CATEGORY1    AS SUB_CATEGORY1,
      T.HDN_SUB_CATEGORY2    AS SUB_CATEGORY2,
      T.HDN_SUB_CATEGORY3    AS SUB_CATEGORY3,
      t.HDN_SUB_CATEGORY4    AS SUB_CATEGORY4,
      --MS_APPS_UTILITIES.GET_USER_FULL_NAME(t1.LAST_UPDATED_BY) as last_updated_by,
      t1.LAST_UPDATED_BY AS last_updated_by,
      t1.DUE_DATE        AS due_date,
      CASE
        WHEN (TRUNC(t1.due_date) - TRUNC(SYSDATE)) IS NULL
        THEN 'NONE'
        WHEN (TRUNC(t1.due_date) - TRUNC(SYSDATE)) < 0
        THEN 'RED'
        WHEN (TRUNC(t1.DUE_DATE) - TRUNC(sysdate)) >= 0
        THEN 'GREEN'
      END AS due_date_color,
      --MS_APPS_UTILITIES.GET_USER_FULL_NAME(ms_apps_utilities.get_user_id(t.AUTHOR_NAME)) as author_full_name,
      t.author_name AS author_name,
      --(ms_apps_utilities.get_user_full_name(ms_apps_utilities.get_user_id(t.owner_name))) as owner_full_name,
      t.owner_name AS owner_name,
      --NVL(T.EFFECTIVE_FROM_DATE, T.CREATION_DATE) AS effective_from,
      T.EFFECTIVE_FROM_DATE AS effective_from,
      NULL                  AS document_object_id,
      NULL                  AS document_id,
      --(MS_APPS_UTILITIES.GET_USER_FULL_NAME(INITIATOR_NAME)) as initiator_full_name,
      INITIATOR_NAME  AS initiator_name,
      t.creation_date AS created_on,
      t.document_type AS doc_type_stored,
      /*MS_APPS_UTILITIES.Get_Display_Value(MS_APPS_UTILITIES.get_enterprise_id(t1.infolet_id),
      'MS_DMS_INLINE_DOCUMENT_TYPE',
      t.document_type,
      1,
      t2.locale_id) as document_type, */
      t1.infolet_id          AS infolet_id,
      t.document_type        AS doc_type,
      NULL                   AS version,
      NULL                   AS NEXT_SCHEDULE_DATE,
      NULL                   AS reassign_url,
      t1.process_instance_id AS process_instance_id,
      -- null as stage_id
      t.CURRENT_STAGE                           AS stage_id,
      NVL(t1.last_update_date,t1.creation_date) AS last_updated_on,
      --MS_DMS_MLS_UTILITIES.MS_DMS_GET_STAGE_MLSVALUE(to_number(t.CURRENT_STAGE),t2.locale_id) as stage_name
      TO_CHAR(t.LIFECYCLE_ID) AS LIFE_CYCLE_ID ,
      t.LIFECYCLE_NAME        AS LIFECYCLE_NAME
    FROM MS_DMS_COMMON_VS t,
      SI_EVENT_ASSIGNMENTS t1
    WHERE t.process_instance_id = t1.process_instance_id
    AND t.instance_id          IN
      (SELECT MAX(instance_id)
      FROM MS_DMS_COMMON_VS
      WHERE process_instance_id = t1.process_instance_id
      )
    AND t.instance_rec_num = 1
    AND NOT EXISTS
      (SELECT 1
      FROM ms_dms_documents_hdr_all_v x
      WHERE x.process_instance_id = t.process_instance_id
      )
    UNION ALL
    SELECT t1.user_id,
      --MS_DMS_RPT_UTILS.GET_FORM_URL(t1.PROCESS_INSTANCE_ID,t1.INFOLET_ID,t.object_name,t1.assignment_id) as document_name,
      ('<a target="_self" href="javascript:calldocument_form(''Pushinfolet?id='
      || htf.ESCAPE_SC(TO_CHAR(t1.INFOLET_ID))
      || CHR (38)
      || 'proc='
      || htf.ESCAPE_SC(TO_CHAR(t1.PROCESS_INSTANCE_ID))
      || CHR (38)
      || 'flag=1'
      || CHR (38)
      || 'emd=1'
      ||
      CASE
        WHEN t1.assignment_id IS NOT NULL
        THEN CHR(38)
          ||'user_asgn_id='
          ||t1.assignment_id
        ELSE NULL
      END
      ||''')">'
      || SUBSTR(''
      || htf.ESCAPE_SC(t.object_name)
      ||'',1,3800)
      || '</a>')                 AS document_name,
      t.HDN_SELECTED_CATEGORY_ID AS category_id,
      T.HDN_SUB_CATEGORY1        AS SUB_CATEGORY1,
      T.HDN_SUB_CATEGORY2        AS SUB_CATEGORY2,
      T.HDN_SUB_CATEGORY3        AS SUB_CATEGORY3,
      t.HDN_SUB_CATEGORY4        AS SUB_CATEGORY4,
      --MS_APPS_UTILITIES.GET_USER_FULL_NAME(t1.LAST_UPDATED_BY) as last_updated_by,
      t1.LAST_UPDATED_BY AS last_updated_by,
      t1.DUE_DATE        AS due_date,
      CASE
        WHEN (TRUNC(t1.due_date) - TRUNC(SYSDATE)) IS NULL
        THEN 'NONE'
        WHEN (TRUNC(t1.due_date) - TRUNC(SYSDATE)) < 0
        THEN 'RED'
        WHEN (TRUNC(t1.DUE_DATE) - TRUNC(sysdate)) >= 0
        THEN 'GREEN'
      END AS due_date_color,
      --ms_apps_utilities.get_user_full_name(ms_apps_utilities.get_user_id(t.author)) as author_full_name,
      t.author AS author_name,
      --(ms_apps_utilities.get_user_full_name(ms_apps_utilities.get_user_id(t.owner_name))) as owner_full_name,
      t.owner_name AS owner_name,
      --NVL(T.EFFECTIVE_FROM, T.CREATION_DATE) AS effective_from,
      T.EFFECTIVE_FROM AS effective_from,
      NULL             AS document_object_id,
      NULL             AS document_id,
      --(MS_APPS_UTILITIES.GET_USER_FULL_NAME(INITIATOR)) as initiator_full_name,
      INITIATOR       AS initiator_name,
      t.creation_date AS created_on,
      t.document_type AS doc_type_stored,
      /* MS_APPS_UTILITIES.Get_Display_Value(MS_APPS_UTILITIES.get_enterprise_id(t1.infolet_id),
      'MS_DMS_INLINE_DOCUMENT_TYPE',
      t.document_type,
      1,
      t2.locale_id) as document_type, */
      t1.infolet_id          AS infolet_id,
      t.document_type        AS doc_type,
      NULL                   AS version,
      NULL                   AS NEXT_SCHEDULE_DATE,
      NULL                   AS reassign_url,
      t1.process_instance_id AS process_instance_id,
      --null as stage_id
      t.CURRENT_STAGE                           AS stage_id,
      NVL(t1.last_update_date,t1.creation_date) AS last_updated_on,
      --MS_DMS_MLS_UTILITIES.MS_DMS_GET_STAGE_MLSVALUE(to_number(t.CURRENT_STAGE),t2.locale_id) as stage_name
      TO_CHAR(t.LIFECYCLE_ID) AS LIFECYCLE_ID,
      t.LIFECYCLE_NAME        AS LIFECYCLE_NAME
    FROM MS_DMS_INLINE_COMMON_VS t,
      SI_EVENT_ASSIGNMENTS t1
    WHERE t.process_instance_id = t1.process_instance_id
    AND t.instance_id          IN
      (SELECT MAX(instance_id)
      FROM MS_DMS_INLINE_COMMON_VS
      WHERE process_instance_id = t1.process_instance_id
      )
    AND t.instance_rec_num = 1
    AND NOT EXISTS
      (SELECT 1
      FROM ms_dms_documents_hdr_all_v x
      WHERE x.process_instance_id = t.process_instance_id
      )
    ) z,
    (SELECT aa.user_id,
      aa.user_name,
      aa.locale,
      bb.locale_id
    FROM si_users_t aa ,
      si_locales bb
    WHERE aa.locale = bb.locale_string
    ) d
  WHERE d.user_id = z.user_id
  AND EXISTS
    (SELECT 1
    FROM si_metrics_t
    WHERE metric_name IN ('MS_DMS_CREATE_DOC','MS_DMS_REVIEW_DOCUMENT','MS_DMS_UPDATE_DOCUMENT' ,'MS_DMS_INLINE_CREATE_DOCMUNENT','MS_DMS_INLINE_REVIEW_DOCUMENT','MS_DMS_INLINE_UPDATE_FORM')
    AND METRIC_ID      = Z.INFOLET_ID
    )
                                                </pre>
                                            </div>
                                        </div>
                                        <!-- /.modal-content -->
                                    </div>
                                    <!-- /.modal-dialog -->
                                </div>
                                <!-- /.table-wrapper -->
                            </div>
                            <!-- /.panel-body -->
                        </div>
                        <!-- /.panel-info -->
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /row -->
            </div>
            <!-- /page wrapper -->
        </div>
        <!-- /.wrapper-->

                <!-- jQuery -->
        <script src="../../bower_components/jquery/dist/jquery.min.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

        <!-- Metis Menu Plugin JavaScript -->
        <script src="../../bower_components/metisMenu/dist/metisMenu.min.js"></script>

        <!-- DataTables JavaScript -->
        <script src="../../bower_components/DataTables/media/js/jquery.dataTables.min.js"></script>
        <script src="../../bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="../../dist/js/sb-admin-2.js"></script>

        <!-- Custom JS scripts for search capbility -->
        <script type="text/javascript" src="../../dist/js/searchsidemenujavascript.js"></script>

        <!-- Custom JS scripts for easy scrollbar -->
        <script src="../../dist/js/jquery.mCustomScrollbar.concat.min.js"></script>
        <link rel="stylesheet" href="../../dist/highlight/styles/sunburst.css"/>
        <script src="../../dist/highlight/highlight.pack.js"></script>

        <script>
            $(document).ready(function() {
                
            });
            $('#sciptModal').on('shown.bs.modal', function () {
                $("body").mCustomScrollbar("disable");
            });
            $('#sciptModal').on('hidden.bs.modal', function () {
                $("body").mCustomScrollbar("update");
            });
                        (function($){
                         function scrollBody(){
                        var referrer = document.URL;
                        var res = referrer.split("#");
                        var hashAddress="#"+res[1];
                        $("body").mCustomScrollbar('scrollTo',$("body").find(hashAddress));  
                        };
                $(window).load(function(){
					var urlSet=document.URL.split("pages/");
					localStorage.setItem("UrlStorage", urlSet[1]);
					var scrollAmt=localStorage.getItem("scrollAmount");
              if(localStorage.getItem("EscrollOff")=="true"){
                
                $("body").mCustomScrollbar({
                    theme:"minimal",
                    mouseWheel:{ scrollAmount: scrollAmt }
                });
                scrollBody();  
			  }
            });
             if(localStorage.getItem("EscrollOff")=="true"){
            $(window).on('hashchange', function(e){
                 scrollBody();
            });
			 }
            })(jQuery);
        </script>
    </body>

</html>
