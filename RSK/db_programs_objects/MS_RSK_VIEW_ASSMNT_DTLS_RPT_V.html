<!DOCTYPE html>
<html lang="en">
       <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>DB Programs and Objects</title>

        <!-- Bootstrap Core CSS -->
        <link href="../../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- MetisMenu CSS -->
        <link href="../../bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet">

        <!-- DataTables CSS -->
        <link href="../../bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet">

        <!-- DataTables Responsive CSS -->
        <link href="../../bower_components/datatables-responsive/css/dataTables.responsive.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="../../dist/css/sb-admin-2.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="../../bower_components/fontawesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../../dist/css/jquery.mCustomScrollbar.css">
        <link href="../../dist/css/style.css" rel="stylesheet">
        <script src="../../js/jquery-1.11.1.min.js"></script>
        <script src="../../dist/js/selectAllJavaScript.js"></script>
        <style>
            html, body{ height: 100%; }
        </style>
    </head>

    <body>
        <div id="wrapper">
            <div id="page-wrapper">
                <div class="row">
                    <br/>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="panel panel-info">
                            <div class="panel-heading">
                                <h4><span class="fa fa-table fa-fw"></span>  <a style="text-decoration: none; " id="MS_RSK_VIEW_ASSMNT_DTLS_RPT_V">MS_RSK_VIEW_ASSMNT_DTLS_RPT_V</a> </h4>
                            </div>
                            <div class="panel-body">
                                <div class="dataTable_wrapper">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="btn btn-primary" onclick="SelectText('selectme')">Select All</button>
                                            </div>
                                            <div class="modal-body" >
                                                <pre id="selectme">
                                                
  CREATE OR REPLACE FORCE VIEW "NOVT_DEV"."MS_RSK_VIEW_ASSMNT_DTLS_RPT_V" ("PLAN_NAME", "ASSMNT_ID", "ASSMNT_STATUS", "ASSMNT_ASSESSOR", "ASSMNT_APPROVER", "ASSMNT_ASSIGNED_ON", "ASSMNT_ASSESSED_ON", "ASSMNT_APPROVED_ON", "ASSMNT_DUE_DATE", "ASSMNT_PUBLISHED_ON", "NO_OF_ISSUES", "NO_OF_OPEN_ISSUES", "NO_OF_OVERDUE_ISSUES", "NO_OF_CLOSED_ISSUES", "SCENARIO_ID", "ASSESSMENT_TYPE", "ORGANIZATIONS", "CORE_OBJECTS", "DUMMY1", "DUMMY2", "DUMMY3", "DUMMY4", "DUMMY5", "DUMMY6", "DUMMY7", "DUMMY8", "DUMMY9", "DUMMY10", "DUMMY11", "DUMMY12", "DUMMY13", "DUMMY14", "DUMMY15", "DUMMY16", "DUMMY17", "DUMMY18") AS 
  SELECT
    --ms_rsk_rpt_utils.get_view_edit_url ('MS_RSK_SCHEDULE_RISK_ASSMN', a.plan_pid, a.plan_name ) AS plan_name,
    --ms_rsk_rpt_utils.Get_View_Edit_Url ('MS_RSK_RISK_ASSESSMENT', a.assmnt_pid,a.assmnt_id )         AS assmnt_id,

    (SELECT MS_RSK_LND_REPORTING_UTILS.BUILD_FORM_URL ('MS_RSK_SCHEDULE_RISK_ASSMN', PLAN_ID,'PLAN','Y',PLAN_NAME,PLAN_PID,PLAN_INSTANCE_ID)
    FROM DUAL
    ) AS PLAN_NAME,
    (SELECT MS_RSK_LND_REPORTING_UTILS.BUILD_FORM_URL ('MS_RSK_RISK_ASSESSMENT',ASSMNT_ID,'ASSMNT','Y',ASSMNT_ID,ASSMNT_PID , ASSMNT_INSTANCE_ID )
    FROM DUAL
    ) AS ASSMNT_ID,
    --ms_rsk_rpt_utils.build_form_url ('MS_RSK_SCHEDULE_RISK_ASSMN', plan_pid, plan_instance_id, 'N', plan_name ) AS plan_name,
    --ms_rsk_rpt_utils.build_form_url ('MS_RSK_RISK_ASSESSMENT', assmnt_pid, assmnt_instance_id, 'N', assmnt_id )      AS assmnt_id,
    --ms_rsk_utils.get_edit_url('MS_RSK_SCHEDULE_RISK_ASSMN', plan_pid, plan_instance_id, 'Y', plan_name ) AS plan_name,
    --ms_rsk_utils.get_asmt_url('MS_RSK_RISK_ASSESSMENT' , assmnt_pid , assmnt_instance_id , 'Y', assmnt_id )   AS assmnt_id,
    a.assmnt_status,
    ms_apps_utilities.get_user_full_name(a.assmnt_assessor)                                                                                                               AS assmnt_assessor,
    ms_apps_utilities.get_user_full_name(a.assmnt_approver)                                                                                                               AS assmnt_approver,
    TRUNC(a.assmnt_assigned_on)                                                                                                                                           AS assmnt_assigned_on,
    TRUNC(a.assmnt_assessed_on)                                                                                                                                           AS assmnt_assessed_on,
    TRUNC(a.assmnt_approved_on)                                                                                                                                           AS assmnt_approved_on,
    TRUNC(a.assmnt_due_date)                                                                                                                                              AS assmnt_due_date,
    TRUNC(a.assmnt_published_on)                                                                                                                                          AS assmnt_published_on,
    ms_rsk_rpt_utils.build_report_url ('ISMISSLR', 'Issue List Report', NULL, NULL, ms_rsk_rpt_utils.fn_get_total_no_of_issues('ONTREND',a.assmnt_id),a.assmnt_id, NULL ) AS no_of_issues,
    ms_rsk_rpt_utils.build_report_url ('ISMISSLR', 'Issue List Report', NULL, NULL, Ms_rsk_Rpt_Utils.Fn_Get_Open_Issues('ONTREND',a.ASSMNT_ID), a.assmnt_id, 'Open' )       AS no_of_open_issues,
    --ms_rsk_rpt_utils.build_report_url ('ISMISSLR', 'Issue List Report', NULL, NULL, ms_rsk_rpt_utils.fn_get_total_no_of_issues('ONTREND',assmnt_id),assmnt_id, NULL )     AS no_of_open_issues,
    ms_rsk_rpt_utils.build_report_url ('ISMISSLR', 'Issue List Report', NULL, NULL, ms_rsk_rpt_utils.fn_get_overdue_issues('ONTREND',a.assmnt_id),a.assmnt_id, NULL )         AS no_of_overdue_issues,
    ms_rsk_rpt_utils.build_report_url ('ISMISSLR', 'Issue List Report', NULL, NULL, ms_rsk_rpt_utils.fn_get_total_no_closed_issues('ONTREND',a.assmnt_id),a.assmnt_id, 'Closed' ) AS no_of_closed_issues,
    a.scenerio,
    a.assmnt_type,
    a.organizations,
    a.core_objects,
    (
    CASE
      WHEN(TRUNC(a.assmnt_due_date) > TRUNC(a.assmnt_published_on))
      THEN 'GREEN'
      WHEN(TRUNC(a.assmnt_due_date) < TRUNC(a.assmnt_published_on))
      THEN 'RED'
      WHEN(TRUNC(a.assmnt_due_date) = TRUNC(a.assmnt_published_on))
      THEN 'GREEN'
      ELSE NULL
    END)          AS dummy1,
    b.lib_risk_id AS dummy2,
    a.risks       AS dummy3,
    NULL          AS dummy4,
    NULL          AS dummy5,
    NULL          AS dummy6,
    NULL          AS dummy7,
    NULL          AS dummy8,
    NULL          AS dummy9,
    NULL          AS dummy10,
    NULL          AS dummy11,
    NULL          AS dummy12,
    NULL          AS dummy13,
    NULL          AS dummy14,
    NULL          AS dummy15,
    NULL          AS dummy16,
    NULL          AS dummy17,
    NULL          AS dummy18
  FROM ms_rsk_assmnt_rpt_dtls a,
    (SELECT c.object_id,
      p.scenario_name,
      ms_concat(DISTINCT c.risk_id) AS lib_risk_id
    FROM ms_rsk_risk_assessment p,
      ms_rsk_risk_assessment_rsk c,
      ms_rsk_assmnt_rpt_dtls d
    WHERE c.object_id    =p.object_id
    AND c.object_id      =d.assmnt_id
    AND p.scenario_name  =d.scenerio
    AND C.Rsk_Flag      <> 3
    AND d.assmnt_status IN('Completed','Assess Assessment','Ongoing Assessment','Sent For Assessment')
      --  and d.assmnt_published_on is not null
    GROUP BY C.OBJECT_ID,
      P.SCENARIO_NAME
    ) B
  WHERE a.scenerio     =b.scenario_name
  AND a.assmnt_id      =b.object_id
  AND a.assmnt_status IN('Completed','Assess Assessment','Ongoing Assessment','Sent For Assessment')

 
                                                </pre>
                                            </div>
                                        </div>
                                        <!-- /.modal-content -->
                                    </div>
                                    <!-- /.modal-dialog -->
                                </div>
                                <!-- /.table-wrapper -->
                            </div>
                            <!-- /.panel-body -->
                        </div>
                        <!-- /.panel-info -->
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /row -->
            </div>
            <!-- /page wrapper -->
        </div>
        <!-- /.wrapper-->

                <!-- jQuery -->
        <script src="../../bower_components/jquery/dist/jquery.min.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

        <!-- Metis Menu Plugin JavaScript -->
        <script src="../../bower_components/metisMenu/dist/metisMenu.min.js"></script>

        <!-- DataTables JavaScript -->
        <script src="../../bower_components/DataTables/media/js/jquery.dataTables.min.js"></script>
        <script src="../../bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="../../dist/js/sb-admin-2.js"></script>

        <!-- Custom JS scripts for search capbility -->
        <script type="text/javascript" src="../../dist/js/searchsidemenujavascript.js"></script>

        <!-- Custom JS scripts for easy scrollbar -->
        <script src="../../dist/js/jquery.mCustomScrollbar.concat.min.js"></script>
        <link rel="stylesheet" href="../../dist/highlight/styles/sunburst.css"/>
        <script src="../../dist/highlight/highlight.pack.js"></script>

        <script>
            $(document).ready(function() {
                
            });
            $('#sciptModal').on('shown.bs.modal', function () {
                $("body").mCustomScrollbar("disable");
            });
            $('#sciptModal').on('hidden.bs.modal', function () {
                $("body").mCustomScrollbar("update");
            });
                        (function($){
                         function scrollBody(){
                        var referrer = document.URL;
                        var res = referrer.split("#");
                        var hashAddress="#"+res[1];
                        $("body").mCustomScrollbar('scrollTo',$("body").find(hashAddress));  
                        };
                $(window).load(function(){
					var urlSet=document.URL.split("pages/");
					localStorage.setItem("UrlStorage", urlSet[1]);
					var scrollAmt=localStorage.getItem("scrollAmount");
              if(localStorage.getItem("EscrollOff")=="true"){
                
                $("body").mCustomScrollbar({
                    theme:"minimal",
                    mouseWheel:{ scrollAmount: scrollAmt }
                });
                scrollBody();  
			  }
            });
             if(localStorage.getItem("EscrollOff")=="true"){
            $(window).on('hashchange', function(e){
                 scrollBody();
            });
			 }
            })(jQuery);
        </script>
    </body>

</html>
