<?xml version="1.0" encoding="UTF-8"?><VIEWS_SPEC xmlns="http://www.metricstream.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.metricstream.com ms_application_schema.xsd">
<!--$Revision: 1.30.2.12.2.2.2.9.2.8 $-->
<!--$Author: prao $-->
<PLATFORM_DETAILS>
<PLATFORM_VERSION>6.0</PLATFORM_VERSION>
<BUILD_VERSION>4.11.0</BUILD_VERSION>
</PLATFORM_DETAILS>
<VIEW_NAME>MS_RGA_FLOW_DOWN_ORG_V</VIEW_NAME>
<OBJECT_ID>MS_RGA_FLOW_DOWN_ORG_V</OBJECT_ID>
<VIEW_TEXT>(ACTIVITY_ID,ACTIVITY_NAME,ACTIVITY_SHORT_NAME,USER_ID,USER_NAME,USER_FULL_NAME,ORG_ENTITY_ID,ORG_ENTITY_NAME,PARENT_ORG_ENTITY_ID,ROLE_ID,ROLE_NAME,ENTERPRISE_ID) AS SELECT activity_id, activity_name, activity_short_name, user_id,user_name, user_full_name, org_entity_id,org_entity_name,parent_org_entity_id, role_id, role_name, enterprise_id
FROM (
SELECT act.activity_id
, act.activity_name
, act.activity_short_name
, usr.user_id
, usr.user_name
, (SELECT Ms_APPS_Utilities.get_user_full_name(usr.user_name) FROM dual) user_full_name
, oe.org_entity_id
, oe.org_entity_name
, oe.root_id parent_org_entity_id
, ro.role_id
, ro.role_name
, usr.ENTERPRISE_ID
FROM si_roles_t ro
, si_role_activities ra
, si_activities_t act
, si_users_t usr
, ms_rga_user_org_roles_v   uo
,  (SELECT CONNECT_BY_ROOT org.org_entity_id as root_id, org.org_entity_id, org.org_entity_name
   FROM si_org_entities_t org
   WHERE SYSDATE BETWEEN (NVL(org.start_date, SYSDATE-1)) AND (NVL(org.end_date, SYSDATE+1))
   CONNECT BY PRIOR org.org_entity_id = org.parent_org_entity_id
   )  OE
WHERE ra.role_id = ro.role_id
AND ra.activity_id = act.activity_id
AND ra.role_id = uo.role_id
AND   uo.user_id = usr.user_id
AND   oe.root_id = uo.org_entity_id
AND   SYSDATE BETWEEN (NVL(usr.start_date, SYSDATE-1)) AND NVL(usr.end_date,SYSDATE+1)
AND   SYSDATE BETWEEN (NVL(ro.start_date, SYSDATE-1)) AND NVL(ro.end_date,SYSDATE+1)
AND   SYSDATE BETWEEN (NVL(act.start_date, SYSDATE-1)) AND NVL(act.end_date,SYSDATE+1)
) </VIEW_TEXT>
</VIEWS_SPEC>
