<?xml version="1.0" encoding="UTF-8"?><VIEWS_SPEC xmlns="http://www.metricstream.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.metricstream.com ms_application_schema.xsd">
<!--$Revision: 1.30.2.12.2.2.2.9.2.8 $-->
<!--$Author: prao $-->
<PLATFORM_DETAILS>
<PLATFORM_VERSION>6.1</PLATFORM_VERSION>
<BUILD_VERSION>4.1.1.0</BUILD_VERSION>
</PLATFORM_DETAILS>
<VIEW_NAME>MS_RGA_UNPROCESSD_CHNL_FEEDS_V</VIEW_NAME>
<OBJECT_ID>MS_RGA_UNPROCESSD_CHNL_FEEDS_V</OBJECT_ID>
<VIEW_TEXT>("CHANNEL_ID","CHANNEL_NAME","CHANNEL_TYPE","STRUCTCONTENT_INFOLET","CHANNEL_DESCRIPTION","CHANNEL_ACTIVE","SOURCE_ID","SOURCE_TYPE","SERVER_ADD_URL","SCR_USER_NAME","SCR_PASSWORD","EMAIL_FROM","KEYWORDS","SOURCE_DESCRIPTION","SOURCE_ACTIVE","SERVER_PARAMETERS","CHNL_DTLS_USERNAME","FEED_AGGTR_USERNAME","FEED_AGGTR_MAILID","FEED_AGGTR_MAILID_2","RESPONSE_DATE","BODY","TITLE_SUBJECT","ATTACHMENTS","CREATED_ON","MODIFIED_ON","PROCESSED_FLAG","ORG_FEED_DATA_ID") AS SELECT
    /*+ Index(c MS_RGA_FEEDAGG_V_IDX_02)
    Index(d MS_RGA_CHNL_DTLS_IDX_01)
    */
    e.Channel_Id Channel_Id, 
    e.Channel_Name Channel_Name,
    e.Channel_Type Channel_Type,
    e.Infolet_Name StructContent_Infolet,
    e.Channel_Description Channel_Description,
    e.Active Channel_Active,
    d.Source_Id Source_Id,
    d.Source_Type Source_Type,
    d.Server_Add_Url Server_Add_Url,
    d.Scr_User_Name Scr_User_Name,
    d.Scr_Password Scr_Password,
    d.Email_From Email_From,
    d.Keywords Keywords,
    d.Source_Description Source_Description,
    DECODE(d.Active,1,'Y',0,'N') Source_Active,
    d.Server_Parameters Server_Parameters,
    d.Username Chnl_Dtls_Username,
    c.Recipient_Username Feed_Aggtr_Username,
    c.Recipient_Mail_Id Feed_Aggtr_MailId,
    C.RECIPIENT_MAIL_ID_2 FEED_AGGTR_MAILID_2, -- Added by SumitL on 12-May-2011
    c.Creation_Date Response_Date,
    c.Body Body,
    c.Subject Title_Subject,
    C.ATTACHMENT ATTACHMENTS,
    c.Creation_Date Created_On,
    c.Creation_Date Modified_On,
    NVL(C.PROCESSED_FLAG,'U') PROCESSED_FLAG,
    --   C.INSTANCE_ID INSTANCE_ID,
    --   c.Instance_Rec_Num Instance_Rec_Num,
    c.Feed_Data_Id Org_Feed_Data_Id
  FROM
    (SELECT z.*,
      Lower(Recipient) Recipient_Mail_Id,
      Lower(SUBSTR(Recipient, Instr(Recipient,'&lt;',1,1)+1, -- Start Position
      (Instr(Recipient,'@',Instr(Recipient,'&lt;',1,1)   +1,1)-(Instr(Recipient,'&lt;',1,1)+1)))) Recipient_Username,
      -- Changed by SumitL on 12-May-2011 &gt; Derived "Recepient_Mail_Id_2".
      -- Purpose &gt; to address recipient mail id with format ("User Full Name" &lt;User_Mail_Id@SomeServer.com&gt;).
      Lower(SUBSTR(Recipient, (Instr(Recipient,'&lt;',1,1)+1), (Instr(Recipient,'&gt;',1,1)-Instr(Recipient,'&lt;',1,1)-1) )) AS Recipient_Mail_Id_2
    FROM Ms_Rga_Feed_Aggregator_V z
    ) c,
    (SELECT u.*, Lower(u.Scr_User_Name) Username FROM Ms_Rga_Channel_Details u
    ) d,
    Ms_Rga_Channel_Master e
  WHERE d.Channel_Id = e.Channel_Id
  AND c.Server       = d.Server_Add_Url
    --And    ((e.Channel_Type = '1' And c.Username = d.Username) Or (e.Channel_Type = '2'))--c.Username   = d.Username
    --And    ((d.Source_Type = '1' And c.Username = d.Username) Or (d.Source_Type = '2'))
    --And    ((d.Source_Type = '1' And (c.Recipient_Username = d.Username or c.Recipient_Mail_Id = d.Username)) Or (d.Source_Type = '2')) -- Changed by SumitL on 12-May-2011 &gt; Commented this line.
  AND ((d.Source_Type       = '1'
  AND (c.Recipient_Username = d.Username
  OR c.Recipient_Mail_Id    = d.Username
  OR c.Recipient_Mail_Id_2  = d.Username))
  OR (d.Source_Type         = '2')
  OR (d.Source_Type         = '3')) -- Changed by SumitL on 12-May-2011 &gt; Added this line for matching Recepient_Mail_Id_2 with Username.
    -- AND c.Metric_Run_Date    IS NOT NULL
  AND d.Active = '1'</VIEW_TEXT>
</VIEWS_SPEC>
